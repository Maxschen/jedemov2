{
  "title": "UUID Editor Example",
  "schema": {
    "type": "object",
    "title": "UUID format with autogenerated uuid",
    "properties": {
      "_header": {
        "type": "string",
        "format": "hidden",
        "description": "<p>Example of new editor format <strong>[uuid]</strong> for string type<p><p>Value must be a valid <a href=\"https://www.ietf.org/rfc/rfc4122.txt\" target=\"_blank\">RFC 4122</a> uuid (Universally Unique IDentifier). If field has initial no value (startval) then a random uuid will be autogenerated</p>",
        "options": {
          "compact": true
        }
      },
      "uuid1": {
        "type": "string",
        "format": "uuid",
        "description": "uuid field with value in startval (Value should be: dd4f33f9-46f4-46b0-8143-5d75a7eea115)"
      },
      "uuid1-clone": {
        "type": "string",
        "description": "watching uuid field with value in startval",
        "template": "{{uuid}}",
        "watch": {
          "uuid": "uuid1"
        }
      },
      "uuid2": {
        "type": "string",
        "format": "uuid",
        "description": "uuid field with no value in startval (autogenerated)"
      },
      "uuid2-clone": {
        "type": "string",
        "description": "watching uuid field with no value in startval",
        "template": "{{uuid}}",
        "watch": {
          "uuid": "uuid2"
        }
      }
    }
  },
  "startval": {
    "uuid1": "dd4f33f9-46f4-46b0-8143-5d75a7eea115"
  },
  "config": {
    "required_by_default": 1,
    "no_additional_properties": 0,
    "display_required_only": 0,
    "keep_oneof_values": 0,
    "ajax": 0,
    "ajaxCredentials": 0,
    "show_opt_in": 0,
    "disable_edit_json": 0,
    "disable_collapse": 0,
    "disable_properties": 0,
    "disable_array_add": 0,
    "disable_array_reorder": 0,
    "disable_array_delete": 0,
    "enable_array_copy": 0,
    "array_controls_top": 0,
    "disable_array_delete_all_rows": 0,
    "disable_array_delete_last_row": 0,
    "prompt_before_delete": 0,
    "lib_aceeditor": 0,
    "lib_sceditor": 0,
    "lib_simplemde": 0,
    "lib_select2": 0,
    "lib_selectize": 0,
    "lib_flatpickr": 0,
    "lib_signaturepad": 0,
    "lib_mathjs": 0,
    "lib_cleavejs": 0,
    "lib_jquery": 0,
    "lib_dompurify": 1
  },
  "code": "// Save current Schema and Startval\nvar schema = jseditor.schema;\nvar startval = jseditor.getValue();\n\n\n// Add custom editor code\nwindow.JSONEditor.defaults.editors.uuid = window.JSONEditor.defaults.editors.string.extend({\n  preBuild: function() {\n    this._super();\n\n    // Use Schema \"default\" for setting autogenerated uuid\n    this.schema[\"default\"] = this.uuid = this.getUuid();\n\n    // Force pattern validation\n    this.jsoneditor.validator.schema.properties[this.key].pattern = this.schema.pattern = '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$';\n\n    // Set field to readonly and hide field, label and description\n    //this.schema.readonly = this.options.compact = this.options.hidden = true;\n  },\n  sanitize: function(value) {\n    if (!this.testUuid(value)) value = this.uuid;\n    return value;\n  },\n  setValue: function(value,initial,from_template) {\n    if (!this.testUuid(value)) value = this.uuid;\n    this.uuid = value;\n    this._super(value,initial,from_template);\n  },\n  getUuid: function() {\n    // https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\n    var d = new Date().getTime();\n    if (typeof performance !== 'undefined' && typeof performance.now === 'function'){\n        d += performance.now(); //use high-precision timer if available\n    }\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = (d + Math.random() * 16) % 16 | 0;\n        d = Math.floor(d / 16);\n        return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n    });\n  },\n  testUuid: function(value) {\n    return (/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(value));\n  }\n});\n\n// Enable custom editor type\nwindow.JSONEditor.defaults.resolvers.unshift(function(schema) {\n  if (schema.type === \"string\" && schema.format === \"uuid\") return \"uuid\";\n});\n\n\n// Regenerate the form\nif (jseditor) jseditor.destroy();\njseditor = new window.JSONEditor(document.querySelector(\"#json-editor-form\"),{schema: schema, startval: startval});",
  "style": "",
  "desc": "Add optional description here. (HTML format)"
}